<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/header :: head">
<title>EXAMPLE application for PCF</title>
<link rel="stylesheet" href="css/foundation.css" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>

	<div th:replace="fragments/header :: header">
		<!-- ============================================================================ -->
		<!-- This content is only used for static prototyping purposes (natural templates)-->
		<!-- and is therefore entirely optional, as this markup fragment will be included -->
		<!-- from "fragments/header.html" at runtime.                                     -->
		<!-- ============================================================================ -->
		<nav class="top-bar">
			<ul class="title-area">
				<li class="name">
					<h1>
						<a href="./">EXAMPLE application for PCF</a>
					</h1>
				</li>
			</ul>
			<section class="top-bar-section">
				<ul class="right">
					<li><a href="./">Home</a></li>
					<li><a href="list-attendees">Attendees</a></li>
					<li><a href="env">Show Environment</a></li>
				</ul>
			</section>
		</nav>
	</div>

	<div class="row">
		<div class="large-12 columns">
			<h3 style="color: #01786E">Demo Application Pivotal CF</h3>
			<hr />
		</div>
	</div>

	<div class="row">
		<div class="large-12 columns">
			<div class="panel">
				<h4>Hello Pivotal CF</h4>
				<br />
				<p>
					The instance index is <b th:text="${instanceIndex}"></b>
				</p>
				<p>
					The instance address is <b th:text="${instanceAddr}"></b>
				</p>

				<div id="resultsBlock-health"></div>

				<div id="resultsBlock-info"></div>

			</div>
			<hr />
		</div>
	</div>

	<div class="row">
		<div class="large-12 columns">
			<!-- This simply refreshes the page to demonstrate changed (or unchanged) ports -->
			<a href="javascript:window.location.reload();" class="medium button">Refresh</a>
			<!-- This link should be changed to the application's kill action -->
			<a href="kill" class="medium alert button">Kill</a>
		</div>
	</div>

	<script>
		$(function() {
			//$("#resultsBlock-health").load("/health");

			$.getJSON('/health', function(health) {
				$('#resultsBlock-health').html(
						'<p>The database is <b>' + health.db.database
								+ '</b></p>');
			});

			$.getJSON('/info', function(info) {
				$('#resultsBlock-info').html(
						'<p>The Artifact is <b>' + info.build.artifact
								+ '</b></p>');
				$('#resultsBlock-info').append(
						'<p>The Version is <b>' + info.build.version
								+ '</b></p>');
			});

		});
	</script>

</body>

</html>